##################################################################
###################################################################
####
####        This file is managed by Puppet
####
####################################################################
####################################################################
###
#####################################################################
####
####   This section replaces /etc/zypp/repos.d/server_monitoring.repo
####
#####################################################################

<% if @operatingsystem == 'SLES' and @operatingsystemrelease.split('.')[-1] >= '1' %>
[server_monitoring]
name=Server Monitoring Software
enabled=1
autorefresh=0
baseurl=http://download.opensuse.org/repositories/server:/monitoring/SLE_<%= @operatingsystemrelease.split('.').first %>_SP<%= @operatingsystemrelease.split('.')[-1] %>/
type=rpm-md
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/server:/monitoring/SLE_<%= @operatingsystemrelease.split('.').first %>_SP<%= @operatingsystemrelease.split('.')[-1] %>//repodata/repomd.xml.key

<% elsif @operatingsystem == 'SLES' and @operatingsystemrelease.split('.')[-1] == '0' %>
[server_monitoring]
name=Server Monitoring Software
enabled=1
autorefresh=0
baseurl=http://download.opensuse.org/repositories/server:/monitoring/SLE_<%= @operatingsystemrelease.split('.').first %>/
type=rpm-md
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/server:/monitoring/SLE_<%= @operatingsystemrelease.split('.').first %>//repodata/repomd.xml.key

<% else @operatingsystemmajrelease == 42 %>
[server_monitoring]
name=Server Monitoring Software (openSUSE_Leap_42.1)
type=rpm-md
baseurl=http://download.opensuse.org/repositories/server:/monitoring/openSUSE_Leap_<%= @operatingsystemrelease %>/
gpgcheck=1
gpgkey=http://download.opensuse.org/repositories/server:/monitoring/openSUSE_Leap_<%= @operatingsystemrelease %>//repodata/repomd.xml.key
enabled=1
<% end %>
